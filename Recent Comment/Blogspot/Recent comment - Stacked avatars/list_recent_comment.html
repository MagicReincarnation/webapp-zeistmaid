<!--========= BTN SHOW DRAWER LIST RECENT COMMENT =========-->
<div class='avatar_stack'>
  <button class='btn' onclick="opendrawer_recent()">
   <div id="avatar_listnew_comment"></div> Notifications <span id="notif_count" class='badge_new_comment'>0</span>
  </button>
 </div>


<!--========= DRAWER LIST RECENT COMMENT =========-->
 <div class="overlay_bgdrawer_recent" onclick="closedrawer_recent()"></div>
 <div id="comment_drawer_recent" class="drawer_recent">
  <button class="close-btn" onclick="closedrawer_recent()">âœ–</button>
  <h2>Recent Komentar</h2>
  <div id="comment_listrecent" class="comment_listrecent"></div>
 </div>
 
 <script type="text/javascript">
 /*<![CDATA[*/
 const recent_comment_config = {
 website: 'https://datakodehiru.blogspot.com', // url website
 maxComments: 500, // max feed recent comment
 avatarSize: 40, // avatar size list recent
 maxCommentChars: 80, // max lengh Chars text comment
 loadMore_recentStep: 5, // load more recent comment 
 maxavatar: 4, //max avatar list in button drawer notif
 latest_comments: 7, // new comments in the last 7 days
 defaultAvatar: "/IMG_20250104_012014_397.jpg", // default avatar
 showAvatars: true, // show avatar list recent
 showtitlepost: false, // show title post recent comment
 showtextmore: false, //show btn more text comment...
 showdate: true, // show date comment
 showloadmore: true, //show btn load more comment
};
let array_commentdt=[],visible_comments=recent_comment_config.loadMore_recentStep,storage_db="notif_recent_"+window.location.hostname,storedNotifs=new Set(JSON.parse(localStorage.getItem(storage_db))||[]);function runrecent_comment(){var e=document.createElement("script");e.src=`${recent_comment_config.website?recent_comment_config.website:""}/feeds/comments/default?alt=json&callback=hr_recent_comment&max-results=${recent_comment_config.maxComments}`,document.body.appendChild(e),document.getElementById("comment_drawer_recent")?.insertAdjacentHTML("beforeend",recent_comment_config?.showloadmore?'<div class="load_morerecent" onclick="loadMore_recent()">Load More</div>':"")}function hr_recent_comment(e){array_commentdt=(e.feed.entry||[]).map(e=>{let t=e.id?.$t.split("post-")[1]||"",n=e.author[0].uri?.$t||"",r=e.content?.$t.replace(/<br *\/?>|[\s]+/gi," ").replace(/<.*?>|[<>]/g,"")||"",o="https://img1.blogblog.com/img/blank.gif"!==e.author[0].gd$image.src?e.author[0].gd$image.src:recent_comment_config.defaultAvatar,a=e.link.find(e=>"alternate"===e.rel).href,c=extract_title_post_url(a),m=new Date(e.published.$t),l=(new Date-m)/864e5<=recent_comment_config.latest_comments&&!storedNotifs.has(t);return{commentId:t,authorId:n,avatar:o,name:e.author[0].name.$t,date:m,comment:r.length>recent_comment_config.maxCommentChars?r.substring(0,recent_comment_config.maxCommentChars)+"...":r,fullComment:r,link:a,articleName:c,isNew:l}}),run_getAvatarList(),run_CommentList()}function run_getAvatarList(){let e=document.getElementById("avatar_listnew_comment");e?(e.innerHTML="",array_commentdt.slice(0,recent_comment_config.maxavatar).forEach(t=>{let n=document.createElement("img");n.src=t.avatar,n.classList.add("avatar"),e.appendChild(n)})):console.log("#avatar_listnew_comment tidak ada")}function run_CommentList(){let e=document.getElementById("comment_listrecent");e?(e.innerHTML="",array_commentdt.slice(0,visible_comments).forEach((t,n)=>{let r=document.createElement("div");r.classList.add("comment_recenthr"),r.setAttribute("data-author-id",t.authorId);let o=t.fullComment.length>recent_comment_config.maxCommentChars;r.innerHTML=`
      ${recent_comment_config.showAvatars?`<img width="${recent_comment_config.avatarSize}" height="${recent_comment_config.avatarSize}" src="${t.avatar}">`:""}
      
      <div class="comment_content">
        <span class="head_recent">
        
          <a class="link_post_head" href="${t.link}" target="_blank"><strong class="username_recent">${t.name}</strong></a>
          
          ${recent_comment_config.showdate?`<time><small>${date_newcomment_recent(t.date)}</small></time>`:""}
          
          ${recent_comment_config.showtitlepost?`<a class="link_post" href="${t.link}" target="_blank">#On ~ <small>${t.articleName}</small></a>`:""}
          
        </span>
        <p onclick="fulltext_shorttext_Comment(${n})" id="comment_text_${n}" class="comment-text" data-short="${t.comment}" data-full="${t.fullComment}">
          ${t.comment}
        </p>
        ${recent_comment_config.showtextmore&&o?'<span class="toggle-btn">Show More</span>':""}
      </div>
    `,e.appendChild(r),setTimeout(()=>{e.classList.remove("hdnrecent"),loading_recent=document.querySelector(".load_morerecent").classList.remove("loading")},3e3)})):console.log("#comment_listrecent tidak ada");let t=array_commentdt.filter(e=>e.isNew).map(e=>e.commentId);document.getElementById("notif_count").innerText=t.length}function fulltext_shorttext_Comment(e){let t=document.getElementById(`comment_text_${e}`),n=t.nextElementSibling,r=t.dataset.short,o=t.dataset.full;t.innerText===r?(t.innerText=o,n.innerText="Show Less"):(t.innerText=r,n.innerText="Show More")}function opendrawer_recent(){let e=document.getElementById("comment_drawer_recent"),t=document.querySelector(".overlay_bgdrawer_recent"),n=document.getElementById("notif_count");array_commentdt?.length?(array_commentdt.filter(e=>e.isNew).forEach(e=>storedNotifs.add(e.commentId)),e&&t?(e.classList.add("active"),t.classList.add("active"),localStorage.setItem(storage_db,JSON.stringify([...storedNotifs])),n&&(n.innerText=0)):console.log("#comment_drawer_recent tidak ada")):console.log("array_commentdt.length ouput 0")}function closedrawer_recent(){let e=document.getElementById("comment_drawer_recent"),t=document.querySelector(".overlay_bgdrawer_recent");e&&e.classList.remove("active"),t&&t.classList.remove("active")}function loadMore_recent(){let e=document.getElementById("comment_listrecent"),t=document.querySelector(".load_morerecent");e?e.classList.add("hdnrecent"):console.log("#comment_listrecent tidak ada"),t?t.classList.add("loading"):console.log(".load_morerecent tidak ada"),visible_comments+=recent_comment_config.loadMore_recentStep,run_CommentList()}function date_newcomment_recent(e){var t=new Date,n='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M22 16a6 6 0 1 1-12 0a6 6 0 0 1 12 0m-6 4a4 4 0 1 0 0-8a4 4 0 0 0 0 8" clip-rule="evenodd"/><path fill="currentColor" fill-rule="evenodd" d="M15.7 13.6a.9.9 0 0 1 .9.9v2a.9.9 0 1 1-1.8 0v-2a.9.9 0 0 1 .9-.9" clip-rule="evenodd"/><path fill="currentColor" fill-rule="evenodd" d="M14.951 16a.9.9 0 0 1 1.248-.249l1.5 1a.9.9 0 1 1-.998 1.498l-1.5-1A.9.9 0 0 1 14.95 16ZM8.5 18a2 2 0 0 0 3.333 1.491l1.334 1.49A4 4 0 0 1 6.5 18z" clip-rule="evenodd"/><path fill="currentColor" fill-rule="evenodd" d="M9.01 5.22c-.621.168-1.201.431-1.605.795c-1.103.995-1.552 2.343-1.552 4.773c0 1.732-.986 3.372-1.696 4.434c-.154.232-.202.453-.193.586c.004.06.018.088.024.098c.004.007.016.026.064.052c.692.37 1.736.64 2.943.811A26 26 0 0 0 10.5 17a1 1 0 1 1 0 2c-1.128 0-2.484-.065-3.786-.25c-1.282-.183-2.603-.493-3.605-1.028c-.737-.394-1.093-1.08-1.14-1.779c-.046-.659.177-1.31.525-1.831c.717-1.074 1.359-2.259 1.359-3.324c0-2.661.492-4.707 2.213-6.258c.725-.654 1.636-1.027 2.419-1.24A8 8 0 0 1 10.5 3a1 1 0 1 1 0 2c-.306 0-.876.052-1.49.22" clip-rule="evenodd"/><path fill="currentColor" fill-rule="evenodd" d="M11.99 5.22c.621.168 1.201.431 1.605.795c1.103.995 1.552 2.343 1.552 4.773a1 1 0 1 0 2 0c0-2.661-.492-4.707-2.213-6.258c-.725-.654-1.636-1.027-2.419-1.24A8 8 0 0 0 10.5 3a1 1 0 0 0 0 2c.306 0 .876.052 1.49.22" clip-rule="evenodd"/><path fill="currentColor" d="M13.147 3.68c0 .695-1.395.042-2.5.042s-2.5.653-2.5-.043c0-.695 1-1.679 2.5-1.679s2.5.984 2.5 1.68"/></svg>',r=(t-e)/864e5;return r<1?`Today ${n}`:r<recent_comment_config.latest_comments?`${Math.floor(r)} days ago ${n}`:e.toLocaleDateString()}function extract_title_post_url(e){try{/^https?:\/\//i.test(e)||(e="https://"+e);let t=new URL(e);if(!t.hostname.includes("."))throw Error("domain kosong");let n=t.pathname,r=n.match(/\/\d{4}\/\d{2}\/([^/.]+)\.html/);if(r)return r[1].replace(/-/g," ");let o=n.match(/\/p\/([^/.]+)\.html/);if(o)return o[1].replace(/-/g," ");return"error"}catch{return"error URL"}}runrecent_comment();
 /*]]>*/
 </script>